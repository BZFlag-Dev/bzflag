<?xml version='1.0' encoding='UTF-8'?>
<world>

  <addon>
    <plugin>crystalspace.renderloop.loop.loader</plugin>
    <paramsfile>renderloop.hi.xml</paramsfile>
  </addon>

  <settings>
    <clearzbuf>no</clearzbuf>
    <clearscreen>yes</clearscreen>
    <renderloop>renderloop</renderloop>
  </settings>

  <plugins>
    <plugin name="genmeshfact">crystalspace.mesh.loader.factory.genmesh</plugin>
    <plugin name="genmesh">crystalspace.mesh.loader.genmesh</plugin>
  </plugins>

  <shaders>
    <shader><file>/shader/ambient.xml</file></shader>
    <shader><file>/shader/std_lighting_fixed.xml</file></shader>
    <shader><file>/shader/sky_scattering.xml</file></shader>
    <shader><file>/shader/light_bumpmap.xml</file></shader>
    <shader><file>/shader/specular/light_spec_bumpmap.xml</file></shader>
    <shader><file>/shader/reflect.xml</file></shader>
  </shaders>

  <textures>
    <texture name="arrow">
      <file>menu_arrow.png</file>
      <for2d>True</for2d>
      <for3d>False</for3d>
      <mipmap>False</mipmap>
    </texture>
    <texture name="stone">
      <file>/lib/std/stone4.gif</file>
    </texture>
    <texture name="grass">
      <file>std_ground.png</file>
    </texture>
    <texture name="boxwall">
      <file>boxwall.png</file>
    </texture>
    <texture name="roof">
      <file>roof.png</file>
    </texture>
    <texture name="red_tank">
      <file>red_tank.png</file>
    </texture>
    <texture name="plain.nor">
      <file>plain_nor.png</file>
      <class>normalmap</class>
    </texture>
  </textures>

  <materials>
    <material name="stone">
      <shader type="pvl">std_lighting_fixed</shader>
      <shadervar name="tex diffuse" type="texture">stone</shadervar>
    </material>
    <material name="grass">
      <shader type="ambient">ambient</shader>
      <shader type="ppl">light_bumpmap</shader>
      <shadervar name="tex diffuse" type="texture">grass</shadervar>
      <shadervar name="tex normal" type="texture">plain.nor</shadervar>
    </material>
    <material name="boxwall">
      <shader type="pvl">std_lighting_fixed</shader>
      <shadervar name="tex diffuse" type="texture">boxwall</shadervar>
    </material>
    <material name="roof">
      <shader type="pvl">std_lighting_fixed</shader>
      <shadervar name="tex diffuse" type="texture">roof</shadervar>
    </material>
    <material name="red_tank">
      <shader type="ambient">ambient</shader>
      <shader type="ppl">light_spec_bumpmap</shader>
      <shadervar name="tex diffuse" type="texture">red_tank</shadervar>
      <shadervar name="tex normal" type="texture">plain.nor</shadervar>
      <shadervar name="specular" type="vector4">0.8, 0.8, 0.8, 0.1</shadervar>
    </material>
    <material name="sky">
      <shader type="ambient">sky_scattering</shader>
      <color red="0" green="0" blue="0"/>
      <shadervar name="sky base color" type="vector3">1.19, 1.50, 2.72</shadervar>
      <shadervar name="sky sun-glow color" type="vector3">0.8, 0.8, 0.8</shadervar>
      <shadervar name="sky sun size" type="float">0.00005</shadervar>
    </material>
  </materials>

  <meshfact file="tank.xml"/>

  <meshfact name="sky">
    <plugin>genmeshfact</plugin>
    <params>
      <sphere rimvertices="64" reversed="true">
        <radius x="50000" y="50000" z="50000" />
      </sphere>
    </params>
  </meshfact>

  <meshfact name='terrain'>
    <plugin>genmeshfact</plugin>
    <params>
      <material>grass</material>
      <v x="800" y="0" z="800" u="-50" v="-50" nx="0" ny="1" nz="-0"/>
      <v x="-800" y="0" z="800" u="-50" v="50" nx="0" ny="1" nz="-0"/>
      <v x="-800" y="0" z="-800" u="50" v="50" nx="0" ny="1" nz="-0"/>
      <v x="800" y="0" z="-800" u="50" v="-50" nx="0" ny="1" nz="-0"/>
      <t v1="3" v2="2" v3="1"/>
      <t v1="3" v2="1" v3="0"/>
    </params>
  </meshfact>

  <sector name="room">

    <ambient red="0.3" green="0.3" blue="0.3" />

    <light name="sun">
      <center x="500000" y="200000" z="0"/>
      <color red="1.5" green="1.3" blue="1.0"/>
      <radius>10000000</radius>
      <influenceradius>10000000</influenceradius>
    </light>

    <meshobj name="sky">
      <plugin>genmesh</plugin>
      <params>
        <factory>sky</factory>
        <material>sky</material>
        <color red="1.0" green="1.0" blue="1.0"/>
      </params>
      <priority>sky</priority>
      <camera/>
      <zfill/>
      <nohitbeam/>
      <noshadows/>
      <staticshape/>
      <polymesh><colldet/></polymesh>
    </meshobj>

    <meshobj name="terrain">
      <plugin>genmesh</plugin>
      <params>
        <factory>terrain</factory>
      </params>
      <priority>wall</priority>
      <zuse/>
      <staticpos/>
      <staticshape/>
    </meshobj>

    <meshobj name="walls">
      <plugin>crystalspace.mesh.loader.thing</plugin>
      <params>
        <v x="-400" y="0" z=" 400" />
        <v x=" 400" y="0" z=" 400" />
        <v x="-400" y="0" z="-400" />
        <v x=" 400" y="0" z="-400" />
        <v x="-400" y="8" z=" 400" />
        <v x=" 400" y="8" z=" 400" />
        <v x="-400" y="8" z="-400" />
        <v x=" 400" y="8" z="-400" />
        <material>stone</material>
        <texlen>15</texlen>
        <p name="back">
          <v>7</v> <v>6</v> <v>2</v> <v>3</v>
        </p>
        <p name="front">
          <v>4</v> <v>5</v> <v>1</v> <v>0</v>
        </p>
        <p name="left">
          <v>6</v> <v>4</v> <v>0</v> <v>2</v>
        </p>
        <p name="right">
          <v>5</v> <v>7</v> <v>3</v> <v>1</v>
        </p>
      </params>
      <zuse/>
      <priority>wall</priority>
      <staticpos/>
      <staticshape/>
    </meshobj>
  </sector>

  <start>
    <sector>room</sector>
    <position x="0" y="1" z="0" />
  </start>

</world>
