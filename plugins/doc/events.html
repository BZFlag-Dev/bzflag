<HTML>
<head>
<title>BZFlag - web login</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="http://www.bzflag.org/general.css">
<link href="http://www.bzflag.or/favicon.ico" rel="shortcut icon">
<style type="text/css">
<!--
.Bold {
	font-size: 16px;
	font-weight: bold;
}
.style2 {font-size: 36px}
.SubHeader {font-size: 18px; font-weight: bold; }
.Code {
	font-size: 16px;
	font-style: italic;
}
.Disabled {color: #FFFFFF}
-->
</style>
</head>
<BODY>
<table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#DDDDDD">
<tr height="50" valign="top">
	<td colspan="2">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td bgcolor="#013571" align="right"><img src="http://www.bzflag.org/images/logo2-1.jpg" alt="logo"></td>
				<td bgcolor="#818181" align="left"><img src="http://www.bzflag.org/images/logo2-2.jpg" alt=""></td>
			</tr>
	  </table>
	</td>
</tr>
<tr valign="top">
	<td>
		<table width="100%">
			<tr>
				<td width="14%" align="center" valign="top">
					<table width="179" border="1" align="center" bordercolor="#000000" bgcolor="#FFFFFF">
					<tr>
						<td align="center"><span class="SubHeader">
						  Contents
						</span></td>
					</tr>
					<tr>
						<td align="center">
							<strong>Overview
                        </strong></a> </td>
					</tr>
					<tr>
						<td align="center">
							<a href="index.html">Introduction
                        </a> </td>
					</tr>
					<tr>
						<td align="center">
							<a href="general.html">General Info
                        </a> </td>
					</tr>
					<tr>
						<td align="center">
							<strong>Refrence
                        </strong></a> </td>
					</tr>
					<tr>
						<td align="center">
							<a href="entrys.html">Entrys</a> </td>
					  </tr>
					<tr>
					<tr>
						<td align="center">
							<a href="types.html">Types</a> </td>
					  </tr>
					<tr>
					<tr>
						<td align="center">
							<a href="events.html">Events</a> </td>
					  </tr>
					<tr>
					<tr>
						<td align="center">
							Functions </td>
					  </tr>
					<tr>
					<tr>
						<td align="center">
							<strong>Examples
                        </strong></a> </td>
					</tr>
					<tr>
						<td align="center">
							shockwaveDeath </td>
					  </tr>
					<tr>
					<tr>
						<td align="center">
							scoreReset </td>
					  </tr>
					<tr>
				  </table>
			  </td>
				<td width="86%">
				<table width="100%" border="0" align="left" cellpadding="2" cellspacing="2" bgcolor="#FFFFFF">
					<tr>
						<td valign="top"><center><b>BZFS API Documentation</b></center></td>
					</tr>
					<tr>
					<td align="left">
					
					  <p align="center" class="Bold style2">Registering Event Handlers</p>
					  <p>A plugin is basically useless if it can't react to events in game. To allow this
  a plugin needs to tell bzfs that it would like to listen for events. To do that
  the plugin will need to call the following function;</p>
					  <p class="Code"> bool bz_registerEvent ( bz_teEventType eventType,,
                          bz_EventHandler* eventHandler );</p>
					  <p>where <span class="Code">eventType</span> is one of the following enumerations;</p>
					  <ul>
					    <li><span class="Code">bz_eCaptureEvent</span> // flag is captured in a CTF game</li>
				        <li><span class="Code">bz_ePlayerDieEvent</span> // a player gets killed </li>
					    <li><span class="Code">bz_ePlayerSpawnEvent</span> // a player joins as a tank</li>
					    <li><span class="Code">bz_eZoneEntryEvent</span> // a player enters a zone ( not implemented ) </li>
					    <li><span class="Code">bz_eZoneExitEvent</span> // a player exits a zone ( not implemented )</li>
					    <li><span class="Code">bz_ePlayerJoinEvent</span> // a user joins the server ( player or observer )</li>
					    <li><span class="Code">bz_ePlayerPartEvent</span> // a user leaves the server ( player or observer )</li>
					    <li><span class="Code">bz_eChatMessageEvent</span> // a chat message is sent </li>
					    <li><span class="Code">bz_eUnknownSlashCommand</span> // a "/" command was issued but not handled</li>
					    <li><span class="Code">bz_eGetPlayerSpawnPosEvent</span> // the server needs a spawn posttion for a player</li>
					    <li><span class="Code">bz_eGetAutoTeamEvent</span>, // The server is asigning a player to a team automaticly</li>
					    <li><span class="Code">bz_eAllowPlayer</span>, // The server is about to allow or disalow a player</li>
					    <li> <span class="Code">bz_eTickEvent</span>, // The server has executed one of it's normal event loops </li>
					    <li><span class="Code">bz_eGenerateWorldEvent</span>, // The server is generating or loading a world</li>
					    <li> <span class="Code">bz_eGetPlayerInfoEvent</span>, // The server needs the info bits about a player</li>
					    <li><span class="Code">bz_eAllowSpawn</span>, // The server is about to allow a player to spawn</li>
					    <li><span class="Code">bz_eListServerUpdateEvent</span> // The server is about to update the list server with new information</li>
					  </ul>					  <p>	      <span class="Code">eventHandler</span> is a pointer to a event handler class. Plug-ins should derive their own versions
      of the event handler class from bz_EventHandler and pass this pointer into the function.
      When the event happens the process function of the class will be called so that the plugin can
      perform any actions it desires.
      
</p>
					  <p>When the plug-ins unload function is called. The plug-in must remove any events it has loaded
        by calling;</p>
					  <p> <span class="Code">bool bz_removeEvent ( bz_teEventType eventType,
                      bz_EventHandler* eventHandler );</span></p>
					  <p>Failure to do so may cause crashes if the plug-in is manualy unloaded at run time.          </p>
					  <p><span class="SubHeader">Event Handlers</span></p>
					  <p>The event handler is a pure virtual class. It does not perform any logic or actions, but simply
                provides a framework for a plugin to use. You need to derive your own version of an event
                handler before you can use it, providing your own code in the "process" method.</p>
					  <p class="Code">virtual void process ( bz_EventData *eventData );</p>
					  <p> When the process method is called, the eventData will be a pointer to a data class. There 
                    are a number of different data classes all derived from bz_EventData. The eventType member
                    of the base class will tell you what type the data is. This allows for the same handler to be used
                    for more then one type of event.</p>
					  <p> The event data for the various event types are as follows, along with there associated data items.
                    Some events may share event data types</p>
					  <table border="1" bgcolor="#DDDDDD">
                        <tr>
                          <td align="left" valign="top">
						  <table border="0" align="left" cellpadding="2" cellspacing="2">
                            <tr>
                              <td><span class="Code">bz_eCaptureEvent</span> provides the folowing data</span> </tdh>
                            </tr>
                            <tr>
                              <td><span class="Code">bz_CTFCaptureEventData<br>
{<br>
                              </span>
                                <blockquote class="Code"> int teamCaped; // the team that had there flag captured<br>
  int teamCaping; // the team that did the capturing<br>
  int playerCaping; // the player ID who did the capture<br>
  float pos[3]; // the last known position of the player<br>
  float rot; // the last known angle of the player<br>
double time; // the time in seconds of the even</blockquote>
<p class="Code">}</p></td>
                            </tr>
                            <tr>
                              <td>
Handle this event when you want to do something when ever somone caputures a team flag. It is usefull for events like clearing bases, tracking scores, or playing sounds.                            </tr>
                          </table>
						  </td>
                        </tr>
                      </table>			
					  
				
					  <br><br>
					  <table border="1"  bgcolor="#DDDDDD">
                        <tr>
                          <td valign="top">
						  <table border="0" align="left" cellpadding="2" cellspacing="2">
                            <tr>
                              <td><span class="Code">bz_ePlayerDieEvent</span> provides the folowing data</tr>
                            <tr>
                              <td><span class="Code">bz_PlayerDieEventData<br>
{<br>
                              </span>
                                <blockquote class="Code"> int			playerID;			// the ID of the player who died<br>
int teamID; // the team of the player who died<br>
int killerID; // the ID of the player doing the killing<br>
int killerTeamID; // the team of the killer<br>
bzApiString flagKilledWith; // the flag the killer had when killing<br>
float pos[3]; // the last known position of the victim<br>
float rot; // the last known rotation of the victim<br>
double time; // the time of the death</blockquote>
<p class="Code">}</p></td>
                            </tr>
                            <tr>
                              <td>
This even is called when ever a player is killed.</tr>
                          </table>
						  </td>
                        </tr>
                      </table>
					  
					  <br><br>
					  <table border="1" bgcolor="#DDDDDD">
                        <tr>
                          <td align="left" valign="top">
						  <table border="0" cellpadding="2" cellspacing="2">
                            <tr>
                              <td><span class="Code">bz_ePlayerSpawnEvent</span> provides the folowing data</tr>
                            <tr>
                              <td><span class="Code">bz_PlayerSpawnEventData<br>
{<br>
                              </span>
                                <blockquote class="Code"> int playerID					// the ID of the player that has spawned;<br>
int teamID; // the Team the player just spawned to<br>
float pos[3]; // the position of the spawn<br>
float rot; // the rotation of the spawn<br>
double time; // the time of the spawn</blockquote>
<p class="Code">}</p></td>
                            </tr>
                            <tr>
                              <td>
Track this event when you wish to know if somone has spawned, and where they have spawned at.
This event does not let you set the spaw position, it is only called AFTER the spawn has been
computed and sent to the playes.</tr>
                          </table>
						  </td>
                        </tr>
                      </table>
					  
					  <br><br>
					  <table border="1" bgcolor="#DDDDDD">
                        <tr>
                          <td align="left" valign="top">
						  <table border="0" cellpadding="2" cellspacing="2">
                            <tr>
                              <td><span class="Code">bz_ePlayerJoinEvent</span> AND <span class="Code">bz_ePlayerPartEvent</span> both provide the folowing data</tr>
                            <tr>
                              <td><span class="Code">bz_PlayerJoinPartEventData<br>
{<br>
                              </span>
                                <blockquote class="Code"> int playerID;					// the ID of the user that has joined or parted<br>
int teamID; // the team ID of the user<br>
bzApiString callsign; // the callsign used by the user<br>
bzApiString reason; // if a part event, the reason for the part<br>
double time; // the time of the event</blockquote>
                                <p class="Code">}</p></td>
                            </tr>
                            <tr>
                              <td>
These events are called when ever a user joins or leaves the server. These events are called for both players and observers.
                            </tr>
                          </table>
						  </td>
                        </tr>
                      </table>
					  
					  
					  
					  </td>
				  </tr>
					<tr>
					<td>
					  <div align="left"><a href="types.html">Previous</a></div> 
					  <div align="right" class="Disabled">Next</div>
					  </td>
					</tr>
				</table>
				</td>
			</tr>
	  </table>
	</td>
</tr>
<tr valign="bottom">
<td bgcolor="#000000" cellpadding="2">
	<table width="100%" border="0" cellpadding="2" bgcolor="#FFFFFF">
		<tr>
			<td align="right">
				<span class="copyright">copyright &copy; <a href="http://www.bzflag.org/wiki/CurrentMaintainer">CurrentMaintainer</a> 1993-2005&nbsp;</span>	
			</td>
		</tr>
		<tr>
			<td>
				<table width="100%" border="0" cellpadding="2" bgcolor="#FFFFFF"><tr><td align="center">
				<a href="http://www.opengl.org/"><img src="http://www.bzflag.org//images/opengl.gif" alt="opengl" width="88" height="31" border="0"></a>
				<a href="http://sourceforge.net/project/?group_id=3248"><img src="http://sourceforge.net/sflogo.php?group_id=3248&amp;type=1" width="88" height="31" alt="sourceforge" border="0"></a>
				<a href="http://sourceforge.net/donate/index.php?group_id=3248"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="Support This Project" /> </a>
				<a href="http://www.linuxgames.com/"><img src="http://www.bzflag.org/images/linuxgames.gif" width="88" height="31" alt="linuxgames" border="0"></a>
				<a href="http://www.telefragged.com/"><img src="http://www.bzflag.org//images/telefragged.gif" width="88" height="31" alt="telefragged" border="0"></a>
			</td>
		</tr>
	</table>
	</td></tr></table>
</td>	
</tr>
</table>

</BODY>
</HTML> 
